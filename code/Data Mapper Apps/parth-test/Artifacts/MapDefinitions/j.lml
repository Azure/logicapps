$version: 1
$input: XML
$output: XML
$sourceSchema: api_projectrequest.xsd
$targetSchema: oebs_projectrequest_header.xsd
$sourceNamespaces:
  ns4: https://SchProjectGBO.SchProjectGBO
  pjc: http://SchCustomerReference.SchCustomerReference
  b: http://schemas.microsoft.com/BizTalk/2003
  ns0: https://SchProjectGBO.PropertySchema
  xs: http://www.w3.org/2001/XMLSchema
$targetNamespaces:
  soapenv: http://schemas.xmlsoap.org/soap/envelope/
  ns0: http://www.dnvgl.com/EBS_Integration/masterdata/ProjectInbound
  xs: http://www.w3.org/2001/XMLSchema
soapenv:Envelope:
  soapenv:Body:
    ns0:PROJECT_REQUEST_ROOT:
      ns0:PROJECT_REQUEST:
        ns0:INTEGRATION_HEADER:
          ns0:ReceiverSystem: /ns4:projectGBO/OEBS_Header/messageDetails/ReceiverSystem
          ns0:SenderSystem: /ns4:projectGBO/OEBS_Header/messageDetails/SenderSystem
        ns0:PROJINTRF:
          $for(/ns4:projectGBO/project):
            ns0:PROJECT:
              ns0:TASKS:
                $for(/ns4:projectGBO/project):
                  $for(task):
                    ns0:TASK:
                      $if(is-greater-than(/ns4:projectGBO/project/feeRate, 10000)):
                        ns0:TASK_ID: /ns4:projectGBO/project/task/taskID
                        ns0:TASK_NUMBER: /ns4:projectGBO/project/task/taskNumber
                        ns0:LONG_TASK_NAME: /ns4:projectGBO/project/task/taskName
                        ns0:PM_PARENT_TASK_REFERENCE: int(/ns4:projectGBO/project/task/pmParentReference)
                      ns0:TASK_NAME: ../feeRate
                      ns0:ATTRIBUTE1: attribute1
              $if(is-greater-than(feeRate, 10000)):
                ns0:ATTRIBUTE1: serviceCode
                ns0:ATTRIBUTE10: task/attribute14
