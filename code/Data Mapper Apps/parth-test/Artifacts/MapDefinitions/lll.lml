$version: 1
$input: XML
$output: XML
$sourceSchema: api_projectrequest.xsd
$targetSchema: oebs_projectrequest_header.xsd
$sourceNamespaces:
  ns4: https://SchProjectGBO.SchProjectGBO
  pjc: http://SchCustomerReference.SchCustomerReference
  b: http://schemas.microsoft.com/BizTalk/2003
  ns0: https://SchProjectGBO.PropertySchema
  xs: http://www.w3.org/2001/XMLSchema
$targetNamespaces:
  soapenv: http://schemas.xmlsoap.org/soap/envelope/
  ns0: http://www.dnvgl.com/EBS_Integration/masterdata/ProjectInbound
  xs: http://www.w3.org/2001/XMLSchema
soapenv:Envelope:
  soapenv:Body:
    ns0:PROJECT_REQUEST_ROOT:
      ns0:PROJECT_REQUEST:
        ns0:INTEGRATION_HEADER:
          ns0:MessageID: /ns4:projectGBO/OEBS_Header/messageDetails/ResponseLocation
        ns0:PROJINTRF:
          $for(/ns4:projectGBO/project):
            ns0:PROJECT:
              ns0:PM_PROJECT_REFERENCE: pmProjectReference
              $if(is-greater-than(feeRate, 1000)):
                ns0:BILL_JOB_GROUP_ID: billGroupName
              ns0:TASKS:
                $for(task):
                  ns0:TASK:
                    ns0:PM_TASK_REFERENCE: billableFlag
